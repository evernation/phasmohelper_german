const e=document.querySelector("#nightmare-toggle"),t=document.querySelector("#hide-excluded-toggle"),i=document.querySelector("#reset"),s=document.querySelectorAll("#possession-buttons > .toggle"),l=document.querySelectorAll("#possession-hints > *"),a=document.querySelectorAll("#evidence-buttons .button"),c=document.querySelectorAll(".ghost"),d=document.querySelectorAll(".ghost .evidence"),o=document.querySelector("#journal-minimap"),n=document.body,r=document.querySelector("#bottom-content");function u(e,t){let i=new Date;i.setTime(i.getTime()+31536e6);let s=i.toUTCString();document.cookie=e+"="+t+";expires="+s+";path=/"}function v(e){let t=e+"=",i=decodeURIComponent(document.cookie).split(";");for(let e=0;e<i.length;e++){let s=i[e];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}function g(){c.forEach(e=>e.classList.remove("disabled","positive","excluded","manual-excluded")),d.forEach(e=>e.querySelectorAll("li").forEach(e=>e.classList.remove("positive","negative","faded"))),a.forEach(e=>e.classList.remove("disabled","positive","negative")),n.classList.remove("positive","negative"),o.classList.add("disabled")}function m(){let t=Array.from(document.querySelectorAll("#evidence-buttons .button.positive[data-evidence]")).map(e=>e.getAttribute("data-evidence")),i=Array.from(document.querySelectorAll("#evidence-buttons .button.positive[data-evidence-extra]")).map(e=>e.getAttribute("data-evidence-extra")),s=e.classList.contains("active");d.forEach(e=>{let l=e.closest(".ghost"),a=e.querySelector("[required]"),c=e.querySelectorAll("[data-evidence]").length,d=e.querySelectorAll(".positive[data-evidence]"),o=e.querySelectorAll(".negative[data-evidence]"),n=e.querySelectorAll(".positive[data-evidence-extra]"),r=e.querySelectorAll(".negative[data-evidence-extra]"),u=e.querySelectorAll(".negative[required]");l.classList.remove("excluded"),s&&t.length===c-1&&null!=a&&!a.classList.contains("positive")?l.classList.add("disabled"):s&&t.length>c-1?l.classList.add("disabled"):d.length!==t.length?l.classList.add("disabled"):n.length!==i.length?l.classList.add("disabled"):((o.length>(s?1:0)||u.length>0||r.length>0)&&l.classList.add("excluded"),l.classList.remove("disabled"));let v=e.querySelectorAll("[data-evidence]:not(.positive, [required])");s&&1==v.length?v.forEach(e=>e.classList.add("faded")):v.forEach(e=>e.classList.remove("faded")),d.forEach(e=>e.classList.remove("faded")),null!=a&&(a.title=s?"In nightmare difficulty, this piece of evidence is guaranteed for this ghost.":"")}),document.querySelectorAll(".ghost.manual-excluded").forEach(e=>e.classList.add("excluded"));let l=Array.from(document.querySelectorAll(".ghost:not(.disabled):not(.excluded) .evidence li:not(.faded)")).map(e=>e.getAttribute("data-evidence")??e.getAttribute("data-evidence-extra")).filter((e,t,i)=>i.indexOf(e)===t),a=Array.from(document.querySelectorAll(".ghost:not(.disabled).excluded .evidence li.negative")).map(e=>e.getAttribute("data-evidence")??e.getAttribute("data-evidence-extra")).filter((e,t,i)=>i.indexOf(e)===t);document.querySelectorAll("#evidence-buttons .button:not(.positive)").forEach(e=>{let t=e.dataset.evidence??e.dataset.evidenceExtra;l.includes(t)||a.includes(t)?e.classList.remove("disabled"):e.classList.add("disabled")});let c=document.querySelectorAll(".ghost:not(.excluded):not(.disabled)");if(0===c.length)n.classList.remove("positive"),n.classList.add("negative"),o.classList.add("disabled");else if(1===c.length){c[0].classList.add("positive"),n.classList.remove("negative"),n.classList.add("positive"),o.classList.remove("disabled");let e=c[0].querySelector("h3").textContent;for(let t of o.querySelectorAll("td"))t.textContent===e?t.classList.add("positive"):t.classList.remove("positive")}else c.forEach(e=>e.classList.remove("positive")),n.classList.remove("positive","negative"),o.classList.add("disabled")}"true"===v("nightmare").toLowerCase()&&(n.classList.add("nightmare"),e.classList.add("active")),"true"===v("hide-excluded").toLowerCase()&&(n.classList.add("hide-excluded"),t.classList.add("active")),a.forEach(e=>{null==e.title?e.title="Left-click to include.\nRight-click to exclude.":e.title+="\n\nLeft-click to include.\nRight-click to exclude."}),i.addEventListener("click",g),document.addEventListener("keypress",function(e){"r"===e.key&&g()}),document.querySelectorAll(".toggle").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active")})}),e.addEventListener("click",function(){u("nightmare",n.classList.toggle("nightmare").toString()),m()}),t.addEventListener("click",function(){u("hide-excluded",n.classList.toggle("hide-excluded").toString()),m()}),s.forEach((e,t)=>e.addEventListener("click",function(){for(let t of s)t!==e&&t.classList.remove("active");l.forEach(e=>e.classList.add("disabled"));let i=document.querySelector("#possession-hints");i.classList.add("disabled"),r.style.marginTop="0px",e.classList.contains("active")&&(l[t].classList.remove("disabled"),i.classList.remove("disabled"),r.style.marginTop=i.clientHeight+"px")})),a.forEach(e=>e.addEventListener("click",function(){let t;let i=e.dataset.evidence;null!=i?t=document.querySelectorAll(`.evidence > li[data-evidence=${i}]`):(i=e.dataset.evidenceExtra,t=document.querySelectorAll(`.evidence > li[data-evidence-extra=${i}]`)),e.classList.contains("positive")?(e.classList.remove("positive","negative"),t.forEach(e=>e.classList.remove("positive","negative"))):(e.classList.remove("negative"),e.classList.add("positive"),t.forEach(e=>e.classList.remove("negative")),t.forEach(e=>e.classList.add("positive"))),m()})),a.forEach(e=>e.addEventListener("contextmenu",function(t){let i;t.preventDefault();let s=e.dataset.evidence;null!=s?i=document.querySelectorAll(`.evidence > li[data-evidence=${s}]`):(s=e.dataset.evidenceExtra,i=document.querySelectorAll(`.evidence > li[data-evidence-extra=${s}]`)),e.classList.contains("negative")?(e.classList.remove("positive","negative"),i.forEach(e=>e.classList.remove("positive","negative"))):(e.classList.remove("positive"),e.classList.add("negative"),i.forEach(e=>e.classList.remove("positive")),i.forEach(e=>e.classList.add("negative"))),m()}));const h=document.querySelectorAll(".ghost h3");h.forEach(e=>e.addEventListener("mousedown",function(t){if((0===t.button||2===t.button)&&(t.preventDefault(),e.closest(".ghost")?.classList.toggle("manual-excluded"),m()),1===t.button){t.preventDefault();let i=e.getAttribute("wiki");null!=i&&window.open(i)}})),h.forEach(e=>e.addEventListener("contextmenu",function(e){e.preventDefault()})),h.forEach(e=>{e.title="Klicke zum auszuschlie\u00DFen.\nMausrad-Klick um das Wiki zu \u00F6ffnen."});
//# sourceMappingURL=index.5d1af01f.js.map